<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Produtos Disponveis para Compra</title>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body onload="carregaProdutos();">

	<div class="container">
	
		<div class="row">
			<div class="col-md-3"></div>
			<div class="col-md-6">
				<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title"><p align="center">Nossos Produtos</p></h3>
						</div>
						<div id="divTabProdutos" class="panel-body">
							
						</div>
				</div>
				<div class="col-md-3"></div>
			</div>
		</div>
	

		
		<hr/>
		
		<div class="row">
			<div class="col-md-3"></div>
			<div class="col-md-6">
				<div class="panel panel-success">
						<div class="panel-heading">
							<h3 class="panel-title"><p align="center">Produtos Adquiridos</p></h3>
						</div>
						<div class="panel-body" id="">
							<div class="row">
								<div class="col-md-6">
									<span>Quantidade de Produtos</span>
								</div>
								<div class="col-md-6">
									<span id="qtdeProdutos">0</span>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<span>Valor dos Produtos</span>
								</div>
								<div class="col-md-6">
									<span id="valorProdutos">0</span>
								</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-3"></div>
			
		</div>	

	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>

</body>
<script type="text/javascript">
	function carregaProdutos() {
		$.get( "/produtos", function( data ) {
			var produtos = JSON.parse(data);
			if(produtos.length>0) {
				var tab = '<table class="table table-hover">';
				tab.append('<thead>');
				tab.append('	<tr>');
				tab.append('		<th>Codigo</th>');
				tab.append('		<th>Nome</th>');
				tab.append('	</tr>');
				tab.append('</thead>');
				tab.append('<tbody>')
				for(var i=0;i++;i<produtos.length) {
					var produto = produtos[i];
					tab.append('<tr>');
					tab.append('	<form id="form_produto_' + produto.codigo '">');
					tab.append('		<td><span><label class="codigo" id="codigo_' + produto.codigo + '">' + produto.codigo + '</label></span></td>');
					tab.append('		<td><span>' + produto.descricao + '</span></td>');
					tab.append('		<td>');
					tab.append('			<label for="qtde">Qtde.</label>');
					tab.append('			<input type="text" id="qtde_' + produto.codigo + '" size="5" value="0">');									
					tab.append('		</td>');
					tab.append('		<td>');
					tab.append('			<button type="button" class="btn btn-primary btn-sm" aria-label="Left Align" onClick="addProduto(' + produto.codigo + ');">');
					tab.append('				<span class="glyphicon glyphicon-plus" aria-hidden="false"></span>&nbsp;Comprar');
					tab.append('			</button>');
					tab.append('		</td>');
					tab.append('	</form>');		            
					tab.append('	</tr>');
				}
				tab.append('</table>');
				$("#divTabProdutos").html(tab);
			}
		  console.log(data);
		});
	}
	
	function addProduto(codigo) {
		var codigo = $("#codigo_" + codigo).val();
		var qtde = $("#qtde_" + codigo).val();
		console.log(form);
	}
	


</script>


</html>
